#!/bin/sh

echo "ğŸš€ Running pre-push checks..."
echo ""

# Run format check
echo "ğŸ“ Checking code formatting..."
if ! npm run format:check; then
  echo ""
  echo "âŒ Format check failed!"
  echo "   Run 'npm run format' to fix formatting issues."
  exit 1
fi
echo "âœ… Format check passed"
echo ""

# Run linting
echo "ğŸ” Running ESLint..."
if ! npm run lint; then
  echo ""
  echo "âŒ Lint check failed!"
  echo "   Run 'npm run lint:fix' to fix linting issues."
  exit 1
fi
echo "âœ… Lint check passed"
echo ""

# Run TypeScript type checking
echo "ğŸ“˜ Running TypeScript type check..."
if ! npm run typecheck; then
  echo ""
  echo "âŒ TypeScript type check failed!"
  echo "   Fix the type errors before pushing."
  exit 1
fi
echo "âœ… TypeScript check passed"
echo ""

# Run tests
echo "ğŸ§ª Running tests..."
if ! npm test -- --run --reporter=verbose; then
  echo ""
  echo "âŒ Tests failed!"
  echo "   Fix the failing tests before pushing."
  exit 1
fi
echo "âœ… Tests passed"
echo ""

echo "âœ… All pre-push checks passed! Pushing..."
